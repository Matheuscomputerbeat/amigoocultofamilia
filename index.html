<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Amigo Oculto Secreto</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
    }

    h1 {
      color: #ffffff;
      text-align: center;
    }

    .container {
      background: #ffffff;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
      width: 100%;
      max-width: 400px;
      text-align: center;
    }

    input[type="text"], input[type="password"] {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      border: 2px solid #ddd;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    button {
      padding: 10px;
      background-color: #28a745;
      color: #ffffff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
    }

    button:hover {
      background-color: #218838;
    }

    .result {
      margin-top: 20px;
      padding: 20px;
      background: #f9f9f9;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      display: none;
    }
  </style>
</head>
<body>
  <h1>Amigo Oculto Secreto</h1>
  <div class="container">
    <!-- Campo para senha de administrador -->
    <input type="password" id="adminPassword" placeholder="Digite a senha de admin">
    <button onclick="checkPassword()">Entrar</button>

    <!-- Seção para carregar os nomes automaticamente -->
    <button onclick="loadNamesFromGitHub()">Carregar Nomes do GitHub</button>

    <input type="text" id="nameInput" placeholder="Digite seu nome para ver seu par">
    <button onclick="viewSecretSanta()">Ver Meu Amigo Oculto</button>
    <div class="result" id="result">
      <p id="secretSantaMessage"></p>
    </div>
  </div>

  <script>
    // Senha para liberar o acesso
    const ADMIN_PASSWORD = "123456789####"; // Altere para sua senha desejada

    // Lista de nomes adicionados via arquivo
    let names = [];

    // Função para verificar a senha do administrador
    function checkPassword() {
      const enteredPassword = document.getElementById("adminPassword").value;
      if (enteredPassword === ADMIN_PASSWORD) {
        alert("Acesso liberado!");
      } else {
        alert("Senha incorreta.");
      }
    }

    // Função para carregar nomes diretamente do GitHub
      // Função para carregar nomes diretamente do GitHub
    function loadNamesFromGitHub() {
  const url = 'https://raw.githubusercontent.com/Matheuscomputerbeat/amigoocultofamilia/main/Novo%20Documento%20de%20Texto.txt'; // URL do arquivo no GitHub
  
  // Tentando carregar o conteúdo do arquivo
  const url = 'https://raw.githubusercontent.com/Matheuscomputerbeat/amigoocultofamilia/main/Novo%20Documento%20de%20Texto.txt'; // URL correta
  fetch(url)
    .then(response => response.text())
    .then(content => {
      console.log("Conteúdo carregado do arquivo:", content); // Debug para verificar o conteúdo
      // Verificando se o conteúdo não está vazio
      if (!content.trim()) {
        alert("O arquivo está vazio!");
        return;
      }
      // Aqui estamos tratando o conteúdo como uma lista separada por vírgulas
      names = content.replace(/"/g, '').split(',')
        .map(name => name.trim())
        .filter(name => name.length > 0);
      console.log("Conteúdo carregado do arquivo:", content);

      console.log("Nomes carregados:", names); // Verificando os nomes carregados
      // Verifique o conteúdo e continue como antes
      names = content.split('\n').map(name => name.trim()).filter(name => name !== "");
      console.log("Nomes carregados:", names);

      if (names.length < 2) {
        alert("O arquivo precisa ter pelo menos dois nomes.");
        return;
      }

      // Gerando os pares de amigo oculto
      generatePairs();
      alert("Nomes carregados e pares gerados com sucesso!");
    })
    .catch(error => {
      console.error("Erro ao carregar o arquivo:", error); // Mensagem de erro
      console.error("Erro ao carregar o arquivo:", error);
      alert("Erro ao carregar o arquivo: " + error);
    });
}
    // Função para gerar e salvar os pares de amigo oculto
    function generatePairs() {
      const pairs = {};
      const shuffledNames = shuffleArray([...names]); // Embaralha os nomes

      // Atribuir pares de amigo oculto
      for (let i = 0; i < names.length; i++) {
        pairs[names[i]] = shuffledNames[i];
      }

      // Salvar os pares no Local Storage
      localStorage.setItem("pairs", JSON.stringify(pairs));
    }

    // Função para embaralhar um array (utilizada para gerar pares aleatórios)
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]]; // Troca os elementos
      }
      return array;
    }

    // Função para mostrar o par de amigo oculto de um nome específico
    function viewSecretSanta() {
      const nameInput = document.getElementById("nameInput").value.trim();
      const pairs = JSON.parse(localStorage.getItem("pairs"));

      if (!pairs) {
        alert("Pares de amigo oculto não foram gerados.");
        return;
      }

      if (!nameInput || !pairs[nameInput]) {
        alert("Nome não encontrado ou não registrado.");
        return;
      }

      // Mostrar o par de amigo oculto
      document.getElementById("secretSantaMessage").textContent = `${nameInput} tem como amigo oculto: ${pairs[nameInput]}`;
      document.getElementById("result").style.display = "block";
    }
  </script>
</body>
</html>
